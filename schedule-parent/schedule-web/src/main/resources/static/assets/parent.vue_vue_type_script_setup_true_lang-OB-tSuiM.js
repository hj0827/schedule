import{u as v,_ as A}from"./useDialog-Dl2BjXS6.js";import{G as o,r as p,a as u,o as I,d as D,g as S,c as x,z as y,w as L,f as b,u as t,A as k}from"./index-DFxeWJFZ.js";const O=()=>o.get({url:"/api/menu/parent"}),z=n=>o.post({url:"/api/menu",data:n}),G=()=>o.get({url:"/api/menu/list"}),K=n=>o.put({url:"/api/menu",data:n}),M=n=>o.delete({url:`/api/menu/${n}`});function B(){const n=p(!0),i=p([]),c=u({children:"children",title:"title",key:"menuId"}),e=async()=>{const s=await O();s.code===200&&(i.value=s.data)},a=u({parentId:"",parentName:""}),l=(s,r)=>{a.parentId=r.node.menuId,a.parentName=r.node.title};return I(()=>{e()}),{showLine:n,treeData:i,fieldNames:c,onSelect:l,selectNode:a,getTreeData:e}}const V=D({__name:"parent",emits:["selectId"],setup(n,{expose:i,emit:c}){const{dialog:e,onClose:a,onShow:l}=v(),{showLine:s,treeData:r,fieldNames:m,onSelect:h,selectNode:d,getTreeData:f}=B(),_=N=>{f(),e.height=450,e.width=300,e.title="选择上级菜单",l()},g=c,w=()=>{if(!d.parentName){k.error("请选择上级菜单");return}g("selectId",d),a()};return i({show:_}),(N,P)=>{const C=S("a-tree");return x(),y(A,{title:t(e).title,width:t(e).width,height:t(e).height,visible:t(e).visible,onOnClose:t(a),onOnConfirm:w},{content:L(()=>[b(C,{"show-line":t(s),"tree-data":t(r),fieldNames:t(m),onSelect:t(h)},null,8,["show-line","tree-data","fieldNames","onSelect"])]),_:1},8,["title","width","height","visible","onOnClose"])}}});export{V as _,z as a,M as d,K as e,G as g};
