import{d as M,r as P,a as w,L as R,g as f,c as j,e as J,f as e,w as a,J as _,u as n,l as h,y as b,X as C,F as L,A as X}from"./index-DFxeWJFZ.js";import{_ as z,a as G,e as H}from"./parent.vue_vue_type_script_setup_true_lang-OB-tSuiM.js";import{u as K,_ as Q}from"./useDialog-Dl2BjXS6.js";import{E as q,T as x}from"./BaseEnum-DZksv6ke.js";import{f as N}from"./index-2NxJnuEc.js";import{u as W}from"./useInstance-MikN16Nm.js";const ne=M({__name:"AddMenu",emits:["refresh"],setup(Y,{expose:D,emit:I}){const{global:U}=W(),{dialog:d,onClose:c,onShow:T}=K(),y=P(),l=w({editType:"",menuId:"",parentId:"",title:"",code:"",name:"",path:"",url:"",type:"",icon:"",parentName:"",orderNum:""}),u=w({parentName:[{required:!0,message:"请选择上级菜单",trigger:"change"}],title:[{required:!0,message:"请填写菜单名称",trigger:"change"}],code:[{required:!0,message:"请填写权限字段",trigger:"change"}],name:[{required:!1,message:"请填写路由名称",trigger:"change"}],path:[{required:!1,message:"请填写路由path",trigger:"change"}],url:[{required:!1,message:"请填写路由url",trigger:"change"}],type:[{required:!0,message:"请选择菜单类型",trigger:"change"}]}),{validate:A,resetFields:F,validateInfos:m,clearValidate:k}=N.useForm(l,u);R(()=>l.type,()=>{k(),l.type!="2"?l.type=="1"?(u.name[0].required=!0,u.path[0].required=!0,u.url[0].required=!0):(u.name[0].required=!0,u.path[0].required=!0,u.url[0].required=!1):(u.name[0].required=!1,u.path[0].required=!1,u.url[0].required=!1),N.useForm(l,u)});const E=I,O=()=>{A().then(async()=>{let o=null;l.editType==q.ADD?o=await G(l):o=await H(l),o&&o.code==200&&(X.success(o.msg),E("refresh")),c()})};D({show:(o,t)=>{F(),d.width=700,d.height=350,o===q.ADD?d.title=x.ADD:(d.title=x.EDIT,U.$objCoppy(t,l)),l.editType=o,T()}});const S=()=>{y.value.show()},V=o=>{l.parentId=o.parentId,l.parentName=o.parentName};return(o,t)=>{const v=f("a-radio"),$=f("a-radio-group"),s=f("a-form-item"),i=f("a-input"),p=f("a-col"),g=f("a-row"),B=f("a-form");return j(),J(L,null,[e(Q,{title:n(d).title,width:n(d).width,height:n(d).height,visible:n(d).visible,onOnClose:n(c),onOnConfirm:O},{content:a(()=>[e(B,null,{default:a(()=>[e(s,_(n(m).type,{labelCol:{style:"width:80px"},label:"菜单类型"}),{default:a(()=>[e($,{value:l.type,"onUpdate:value":t[0]||(t[0]=r=>l.type=r)},{default:a(()=>[e(v,{value:0},{default:a(()=>t[9]||(t[9]=[h("目录")])),_:1}),e(v,{value:1},{default:a(()=>t[10]||(t[10]=[h("菜单")])),_:1}),e(v,{value:2},{default:a(()=>t[11]||(t[11]=[h("按钮")])),_:1})]),_:1},8,["value"])]),_:1},16),e(g,null,{default:a(()=>[e(p,{span:12},{default:a(()=>[e(s,_(n(m).parentName,{labelCol:{style:"width:80px"},label:"上级菜单"}),{default:a(()=>[e(i,{readonly:"",onClick:S,value:l.parentName,"onUpdate:value":t[1]||(t[1]=r=>l.parentName=r),placeholder:"请选择上级菜单"},null,8,["value"])]),_:1},16)]),_:1}),e(p,{span:12},{default:a(()=>[e(s,_(n(m).title,{labelCol:{style:"width:80px"},label:"菜单名称"}),{default:a(()=>[e(i,{value:l.title,"onUpdate:value":t[2]||(t[2]=r=>l.title=r),placeholder:"请填写菜单名称"},null,8,["value"])]),_:1},16)]),_:1})]),_:1}),e(g,null,{default:a(()=>[e(p,{span:12},{default:a(()=>[e(s,_(n(m).code,{labelCol:{style:"width:80px"},label:"权限字段"}),{default:a(()=>[e(i,{value:l.code,"onUpdate:value":t[3]||(t[3]=r=>l.code=r),placeholder:"请选择权限字段"},null,8,["value"])]),_:1},16)]),_:1}),e(p,{span:12},{default:a(()=>[e(s,{labelCol:{style:"width:80px"},label:"序号"},{default:a(()=>[e(i,{value:l.orderNum,"onUpdate:value":t[4]||(t[4]=r=>l.orderNum=r),placeholder:"请填写序号"},null,8,["value"])]),_:1})]),_:1})]),_:1}),b(e(g,null,{default:a(()=>[e(p,{span:12},{default:a(()=>[e(s,_(n(m).name,{labelCol:{style:"width:80px"},label:"路由名称"}),{default:a(()=>[e(i,{value:l.name,"onUpdate:value":t[5]||(t[5]=r=>l.name=r),placeholder:"请填写路由名称"},null,8,["value"])]),_:1},16)]),_:1}),e(p,{span:12},{default:a(()=>[e(s,_(n(m).path,{labelCol:{style:"width:80px"},label:"路由地址"}),{default:a(()=>[e(i,{value:l.path,"onUpdate:value":t[6]||(t[6]=r=>l.path=r),placeholder:"请填写路由地址"},null,8,["value"])]),_:1},16)]),_:1})]),_:1},512),[[C,l.type!="2"]]),e(g,null,{default:a(()=>[b(e(p,{span:12},{default:a(()=>[e(s,_(n(m).url,{labelCol:{style:"width:80px"},label:"组件地址"}),{default:a(()=>[e(i,{value:l.url,"onUpdate:value":t[7]||(t[7]=r=>l.url=r),placeholder:"请填写路由名称"},null,8,["value"])]),_:1},16)]),_:1},512),[[C,l.type=="1"]]),e(p,{span:12},{default:a(()=>[e(s,{labelCol:{style:"width:80px"},label:"菜单图标"},{default:a(()=>[e(i,{value:l.icon,"onUpdate:value":t[8]||(t[8]=r=>l.icon=r),placeholder:"请填写菜单图标"},null,8,["value"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["title","width","height","visible","onOnClose"]),e(z,{ref_key:"parentRef",ref:y,onSelectId:V},null,512)],64)}}});export{ne as _};
