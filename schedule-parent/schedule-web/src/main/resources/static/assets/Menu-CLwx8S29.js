import{E as R,D as F}from"./BaseEnum-DZksv6ke.js";import{_ as O}from"./AddMenu.vue_vue_type_script_setup_true_lang-tYlzUSyd.js";import{u as z}from"./useInstance-MikN16Nm.js";import{d as K,g as U}from"./parent.vue_vue_type_script_setup_true_lang-OB-tSuiM.js";import{r as A,A as E,a as W,o as N,H as j,R as T,U as q,V as G,d as J,g as m,x as P,c as n,e as B,y as h,z as l,w as o,f as I,l as p,u as a,F as D,i as r,W as Q,_ as S}from"./index-DFxeWJFZ.js";import"./useDialog-Dl2BjXS6.js";import"./index-2NxJnuEc.js";function X(y){const{global:c}=z(),d=A();return{addBtn:()=>{d.value.show(R.ADD)},editBtn:t=>{d.value.show(R.EDIT,t)},deleteBtn:async t=>{if(await c.$myconfirm()){let i=await K(t.menuId);i.code===200?(E.success(i.msg),y()):E.error(i.msg)}},addRef:d}}function Y(){const y=W({list:[]}),c=A(0),d=[{title:"菜单名称",dataIndex:"title",key:"title",width:180},{title:"权限字段",dataIndex:"code",key:"code",width:180},{title:"图标",dataIndex:"icon",key:"icon"},{title:"上级菜单",dataIndex:"parentName",key:"parentName"},{title:"菜单类型",dataIndex:"type",key:"type"},{title:"路由名称",dataIndex:"name",key:"name"},{title:"路由地址",dataIndex:"path",key:"path"},{title:"组件路径",dataIndex:"url",key:"url"},{title:"操作",dataIndex:"action",key:"action",align:"center",width:230}],s=async()=>{let t=await U();t&&t.code==200&&(y.list=t.data)},_=t=>{const{expanded:k,onExpand:i,record:x}=t;return k?T(q,{class:"iconClass",onClick:g=>{i(x,g)}}):T(G,{class:"iconClass",onClick:g=>{i(x,g)}})},f=()=>{s()};return N(()=>{s(),j(()=>{c.value=window.innerHeight-250})}),{tableList:y,tableHeight:c,getList:s,columns:d,expandIcon:_,refresh:f}}const Z=J({__name:"Menu",setup(y){const{tableHeight:c,columns:d,tableList:s,expandIcon:_,refresh:f}=Y(),{addBtn:t,editBtn:k,deleteBtn:i,addRef:x}=X(f);return N(()=>{document.title=F.menu}),(g,e)=>{const H=m("plus-outlined"),C=m("a-button"),w=m("a-tag"),L=m("edit-outlined"),M=m("delete-outlined"),V=m("a-table"),b=P("permission");return n(),B(D,null,[h((n(),l(C,{style:{"margin-bottom":"15px"},onClick:a(t),type:"primary"},{icon:o(()=>[I(H)]),default:o(()=>[e[0]||(e[0]=p(" 新增 "))]),_:1},8,["onClick"])),[[b,["sys:menu:add"]]]),a(s).list&&a(s).list.length>0?(n(),l(V,{key:0,expandIcon:a(_),rowKey:"menuId",pagination:!1,defaultExpandAllRows:!0,bordered:"",scroll:{y:a(c)},columns:a(d),"data-source":a(s).list},{bodyCell:o(({column:v,record:u})=>[v.key==="type"?(n(),B(D,{key:0},[u.type==0?(n(),l(w,{key:0,color:"red"},{default:o(()=>e[1]||(e[1]=[p("目录")])),_:1})):r("",!0),u.type==1?(n(),l(w,{key:1,color:"blue"},{default:o(()=>e[2]||(e[2]=[p("菜单")])),_:1})):r("",!0),u.type==2?(n(),l(w,{key:2,color:"cyan"},{default:o(()=>e[3]||(e[3]=[p("按钮")])),_:1})):r("",!0)],64)):r("",!0),v.key==="icon"?(n(),l(Q(u.icon),{key:1})):r("",!0),v.dataIndex==="action"?(n(),B(D,{key:2},[h((n(),l(C,{onClick:$=>a(k)(u),style:{"margin-right":"10px"},type:"primary"},{icon:o(()=>[I(L)]),default:o(()=>[e[4]||(e[4]=p(" 编辑 "))]),_:2},1032,["onClick"])),[[b,["sys:menu:edit"]]]),h((n(),l(C,{onClick:$=>a(i)(u),type:"danger"},{icon:o(()=>[I(M)]),default:o(()=>[e[5]||(e[5]=p(" 删除 "))]),_:2},1032,["onClick"])),[[b,["sys:menu:delete"]]])],64)):r("",!0)]),_:1},8,["expandIcon","scroll","columns","data-source"])):r("",!0),I(O,{ref_key:"addRef",ref:x,onRefresh:a(f)},null,8,["onRefresh"])],64)}}}),le=S(Z,[["__scopeId","data-v-40c716b0"]]);export{le as default};
