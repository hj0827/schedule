import{d as T,a as c,o as U,c as V,e as q,f as e,w as t,g as n,j as h,h as D,n as m,k as _,u as f,l as g,m as F,s as L,p as M,q as P,v as R,_ as j}from"./index-DFxeWJFZ.js";import{f as z}from"./index-2NxJnuEc.js";import{D as A}from"./BaseEnum-DZksv6ke.js";const E={class:"login-container"},J=T({__name:"Login",setup(O){const v=h(),a=c({username:"",password:""}),w=c({username:[{required:!0,message:"请输入用户名",trigger:"change"}],password:[{required:!0,message:"请输入密码",trigger:"change"}]}),{validateInfos:u,validate:B,clearValidate:k}=z.useForm(a,w),x=()=>{B().then(async()=>{let s=await F(a);console.log("登录返回的数据"+JSON.stringify(s)),s&&s.code==200&&(L(s.data.token),M(s.data.userId),P(s.data.username),R(s.data.name),v.push({path:"/"}))}).catch(()=>{console.log("登录失败")})},y=()=>{a.username="",a.password="",k()};return U(()=>{document.title=A.login}),(s,o)=>{const r=n("a-form-item"),i=n("a-icon"),N=n("a-input"),b=n("a-input-password"),p=n("a-button"),d=n("a-col"),C=n("a-row"),I=n("a-form");return V(),q("div",E,[e(I,{class:"loginForm"},{default:t(()=>[e(r,null,{default:t(()=>o[2]||(o[2]=[D("span",{class:"loginTitle"}," 安桥排课系统 ",-1)])),_:1}),e(r,m(_(f(u).username)),{default:t(()=>[e(N,{value:a.username,"onUpdate:value":o[0]||(o[0]=l=>a.username=l),placeholder:"请输入用户名"},{prefix:t(()=>[e(i,{type:"user"})]),_:1},8,["value"])]),_:1},16),e(r,m(_(f(u).password)),{default:t(()=>[e(b,{value:a.password,"onUpdate:value":o[1]||(o[1]=l=>a.password=l),placeholder:"请输入密码","visibility-toggle":!0},{prefix:t(()=>[e(i,{type:"lock"})]),_:1},8,["value"])]),_:1},16),e(r,null,{default:t(()=>[e(C,{gutter:[16,16]},{default:t(()=>[e(d,{span:12},{default:t(()=>[e(p,{type:"primary",class:"Btn loginBtn",onClick:x},{default:t(()=>o[3]||(o[3]=[g(" 登录 ")])),_:1})]),_:1}),e(d,{span:12},{default:t(()=>[e(p,{onClick:y,class:"Btn resetBtn"},{default:t(()=>o[4]||(o[4]=[g(" 重置 ")])),_:1})]),_:1})]),_:1})]),_:1})]),_:1})])}}}),K=j(J,[["__scopeId","data-v-b95bc94e"]]);export{K as default};
